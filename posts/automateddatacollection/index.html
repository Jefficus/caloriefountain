<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Automated data collection | Project Calorie Fountain</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/bootblog.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="/rss.xml">
<link rel="canonical" href="https://www.caloriefountain.org/posts/automateddatacollection/">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<link rel="icon" href="/favicon.ico" sizes="24x24">
<link rel="icon" href="/favicon.ico" sizes="32x32">
<link rel="icon" href="/favicon.ico" sizes="40x40">
<link rel="icon" href="/favicon.ico" sizes="48x48">
<link rel="icon" href="/favicon.ico" sizes="64x64">
<link rel="icon" href="/favicon.ico" sizes="96x96">
<link rel="icon" href="/favicon.ico" sizes="128x128">
<link rel="icon" href="/favicon.ico" sizes="192x192">
<link rel="icon" href="/favicon.ico" sizes="256x265">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><script type="text/javascript" src="/assets/js/jquery-3.6.3.min.js"></script><script type="text/javascript" src="/assets/js/sorttable.js"></script><meta name="author" content="Jefferson Smith">
<meta name="robots" content="noindex">
<meta property="og:site_name" content="Project Calorie Fountain">
<meta property="og:title" content="Automated data collection">
<meta property="og:url" content="https://www.caloriefountain.org/posts/automateddatacollection/">
<meta property="og:description" content="I've been waffling for days now over how to set up the sensor gear. On the one hand, I like the rigor of having all the data collected automatically every hour, but the more I look into it, the more I">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-30T19:14:00-06:00">
<meta property="article:tag" content="automation">
<meta property="article:tag" content="equipment">
<meta property="article:tag" content="sensors">
<meta property="article:tag" content="target-kratky-tank">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="blog-header-logo text-dark" href="/">
            <img src="/images/logo3-w-text.png" alt="Project Calorie Fountain" id="logo" class="d-inline-block align-top"></a>
          <div class="tagline">In an enlightened society, shouldn't EVERYONE be able to feed their family?</div>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="/" class="nav-link">Home</a>
                </li>
<li class="nav-item">
<a href="/priority/labnotes/" class="nav-link">Lab Notes</a>
                </li>
<li class="nav-item">
<a href="/priority/targets/" class="nav-link">Targets</a>
                </li>
<li class="nav-item">
<a href="/priority/results/" class="nav-link">Results</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Other</a>
            <div class="dropdown-menu">
                    <a href="/about-me/" class="dropdown-item">About Me</a>
                    <a href="/archive.html" class="dropdown-item">Archive</a>
                    <a href="/tags/" class="dropdown-item">Tags</a>
                    <a href="/rss.xml" class="dropdown-item">RSS feed</a>
            </div>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/posts/automateddatacollection/" class="u-url">Automated data collection</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Jefferson Smith
            </span></p>
            <p class="dateline">
            <a href="/posts/automateddatacollection/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-30T19:14:00-06:00" itemprop="datePublished" title="2023-03-30 19:14">2023-03-30 19:14</time></a>
            </p>
                <p class="commentline">
    
        <a href="/posts/automateddatacollection/#isso-thread">Comments</a>


            

        </p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><img class="float-right blogthumb" src="/posts/images/flower-network.jpg"> I've been waffling for days now over how to set up the sensor gear. On the one hand, I like the rigor of having all the data collected automatically every hour, but the more I look into it, the more I realize that doing so comes with unexpected costs in both money and time. </p>
<!-- TEASER_END -->
<hr class="teaserbreak">
<p>To automatically sample everything specified in the <a class="bloglink obsidian" href="/posts/targetkratkytank">target spec</a> from each tank would require about $150 in sensor gear for each tank. Moreover, the sensors needed to measure pH and EC are not set-and-forget; they require calibration and maintenance every week or two. As a one-man lab, I need to be <em>very</em> careful with my time allocation. So I want to find a solution that minimizes time drain but still captures essential data with sufficient frequency to be useful for later analysis.</p>
<p>I already know that ambient temperature and humidity can be passively collected by zero-maintenance modules, and that one sensor kit should be sufficient to cover however many tanks are running in a single room.</p>
<p>But there's one metric that complicates this: light intensity. I could set a timer on a 2000 lumen light array and <em>assume</em> the plants are getting the right amount of light on the right schedule, but I'd rather <em>know</em> they are. So for that, I'll need regularly daily sampling, right on top of the tank. And if I'm going to have a constant monitor on the tank anyway, it is slightly more diligent to collect the temperature and humidity values there too, since they will vary slightly from  what might be measured elsewhere in the room.</p>
<p>I can live with gathering pH and EC data on a daily basis, manually, (see discussion <a class="bloglink obsidian" href="/posts/sensorcalibration">here</a>) since those values are not going to change rapidly. I could also collect water depth information at that time, but I'm thinking manual depth readings will be subject to greater error, so I've decided to track depth as part of the constant telemetry system as well, using an ultrasound proximity sensor.</p>
<h3>Case design</h3>
<p>The case for the monitoring package will have protrusions for temperature/humidity sensor, so that they are isolated from any heat produced by the microcontroller and power supply. The bottom of the case will have the two ultrasound cylinders, and the case will be designed to snap-fit into an observation hatch cut into the tank lid.</p>
<p>The case will have a push-button on top and a single status LED. Pressing the button will put the monitor into standby mode, for 10 minutes. During this time, no readings will be taken. This will allow me to remove the monitor, use the revealed access port to take the daily measurments, put the monitor back in place, and then allow the system to return to a stable condition before telemetry resumes.</p>
<p>The status light will have 5 states:
    - green: all is well, the monitor is waiting for the next sample period
    - blue: all is well, the monitor is taking samples and relaying data to the collector
    - yellow: the button has been pushed and the monitor is temporarily paused
    - purple: same as green, but some metrics are outside expected range, consult logs for more info
    - red: some kind of error has been detected, consult the logs for more info</p>
<p>It would be nice to maybe capture air temp and humidity within the tank too, but those don't strike me as especially important if we're already capturing the values for the room.</p>
<h3>Rumination</h3>
<p>Daily metrics:
    - pH, 24hr, manual, PH200 + memento?
    - EC, 24hr, manual, inkbird + memento?
    - h20Tmp, 24hr, manual, PH200 + memento?
    Tank ID captured via barcode/NFC at measurement time</p>
<p>These would be automated using a variant of the existing rapanui moai client.
Will require a new case and schematic design.
    - Lux - 15min, automated, rapanui w TSL2591
    - AirTmp - 15min, automated, rapanui w DH22
    - Hmd - 15min, automated, rapanui w DH22
    - h2oDepth, 24hr, manual, rapanui w HC-SR04
    Tank ID assigned at deployment time
    Depth of empty tank measured at deployment time</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="/tags/automation/" rel="tag">automation</a></li>
            <li><a class="tag p-category" href="/tags/equipment/" rel="tag">equipment</a></li>
            <li><a class="tag p-category" href="/tags/sensors/" rel="tag">sensors</a></li>
            <li><a class="tag p-category" href="/tags/target-kratky-tank/" rel="tag">target-kratky-tank</a></li>
        </ul></nav></aside><section class="comments hidden-print jefficus"><h2>Comments</h2>
        
    
        <div data-title="Automated data collection" id="isso-thread"></div>
        <script src="https://Jefficus.pythonanywhere.com/js/embed.min.js" data-isso="https://Jefficus.pythonanywhere.com/" data-isso-lang="en"></script></section></article><!--End of body content--><footer id="footer">
            Contents © 2023         <a href="mailto:jeff@smithicus.com">Jefferson Smith</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


            <script src="/assets/js/jquery.min.js"></script><script src="/assets/js/popper.min.js"></script><script src="/assets/js/bootstrap.min.js"></script><script src="/assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
